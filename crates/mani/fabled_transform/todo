Is translation happening in local space to the model or in world space?
Is translation happening in local space to the model or in world space?

The pseudo code below are my hypotheses. It might be incorrect, but it will go through testing.

To modify translation from local to world.
    pseudo code

    let local_translation = transform.position;
    let world_translation = LocalTowWorld * [local_translation[0], local_translation[1], local_translation[2], 1.0]

To modify rotation from local to world.
    pseudo code

    // if the entity doesn't have a parent component then the local and world rotation should be the same.
    let local_rotation = transform.rotation;
    let mut world_rotation = transform.rotation;

    if(has_parent){
        world_rotation = parent.local_rotation * local_rotation; //(root_parent.local_rotation * next_parent.local_rotation * next_parent.local_rotation * ... * child.local_rotation)
    }

To modify scale from local to world.
    pseudo code


    // Get the next parent eg.
    // ParentEntity2 <- ParentEntity1 <- ... <- Entity1

    let mut mtx = parent.local_matrix * transform.local_matrix;
    let (world_scale, _, _) = mtx.decompose();

    world_scale

So if the entity doesn't have a parent component then the rotation and scale will be the same.


convert back from world to local for translation, rotation and scale.


